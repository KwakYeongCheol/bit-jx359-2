<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Scrap">
	<insert id="insert" parameterType="Scrap">
		insert into scraps (postId, scrappedBlogId, scrappedPostId, scrappedPostTitle, scrappedPostContents)
		values(#{postId}, #{scrappedBlog.id}, #{scrappedPostId}, #{scrappedPostTitle}, #{scrappedPostContents})
	</insert>
	
	<sql id="select">
		SELECT
			postId,
			scrappedBlogId as "scrappedBlog.id",
			scrappedPostId,
			scrappedPostTitle,
			scrappedPostContents
		FROM
			scraps
	</sql>
	
	<select id="findAllByPostId" resultType="Scrap">
		<include refid="select" />
		WHERE
			postId = #{postId}
	</select>
	
	<select id="findByPostIdAndScrappedBlogIdAndScrappedPostId" resultType="Scrap">
		<include refid="select" />
		WHERE
			postId = #{postId}
			AND scrappedBlogId = #{scrappedBlogId}
			AND scrappedPostId = #{scrappedPostId}
	</select>
</mapper>