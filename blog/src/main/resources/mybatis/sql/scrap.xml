<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Scrap">
	<insert id="insert" parameterType="Scrap">
		insert into scraps (postId, scrappedBlogId, scrappedPostDisplayId, scrappedPostRevisionId, scrappedPostTitle, scrappedPostContents)
		values(#{postId}, #{scrappedBlog.id}, #{scrappedPostDisplayId}, #{scrappedPostRevisionId}, #{scrappedPostTitle}, #{scrappedPostContents})
	</insert>
	
	<sql id="select">
		SELECT
			postId,
			scrappedBlogId as "scrappedBlog.id",
			scrappedPostDisplayId,
			scrappedPostRevisionId,
			scrappedPostTitle,
			scrappedPostContents
		FROM
			scraps
	</sql>
	
	<select id="findAllByPostId" resultType="Scrap">
		<include refid="select" />
		WHERE
			postId = #{postId}
	</select>
	
	<select id="findByPostIdAndScrappedBlogIdAndScrappedPostDisplayId" resultType="Scrap">
		<include refid="select" />
		WHERE
			postId = #{postId}
			AND scrappedBlogId = #{scrappedBlogId}
			AND scrappedPostDisplayId = #{scrappedPostDisplayId}
	</select>
</mapper>